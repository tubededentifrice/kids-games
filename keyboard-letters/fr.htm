<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Clavier</title>
    <style type="text/css">
        body {
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif
        }

        #keyPressed {
            text-align: center;
            font-size: 1200px;
            line-height: 1200px;
        }
    </style>

    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" type="text/javascript"></script>
</head>
<body>
    <div id="keyPressed"></div>

    <script type="text/javascript">
        jKeyPressed = $("#keyPressed");
        var timeout = null;
        function show(letter) {
            if (timeout) {
                this.clearTimeout(timeout);
            }

            jKeyPressed.text(letter);
            timeout = this.setTimeout(function () {
                if (timeout) {
                    jKeyPressed.text("");
                    this.clearTimeout(timeout);
                    timeout = null;
                }
            }, 10000);
        }

        var voices,voice;
        window.speechSynthesis.onvoiceschanged = function () {
            voices = window.speechSynthesis.getVoices();
            voices.forEach(function (aVoice) {
                if (aVoice.lang == "fr-FR") {
                    voice = aVoice;
                }
            });
        };

        function say(text) {
            if (voice != null) {
                var msg = new SpeechSynthesisUtterance();
                msg.voice = voice;
                msg.voiceURI = voice.voiceURI;
                msg.volume = 1; // 0 to 1
                msg.rate = 0.7; // 0.1 to 10
                msg.pitch = 1; //0 to 2
                msg.text = text;
                msg.lang = voice.lang;

                window.speechSynthesis.speak(msg);
            }
        }



        var mappings = {
            "à": "0",
            "&": "1",
            "é": "2",
            '"': "3",
            "'": "4",
            "(": "5",
            "-": "6",
            "è": "7",
            "_": "8",
            "ç": "9",
        };

        var sounds = {
            "A": "A comme Amalle",
            "B": "B comme Ballon",
            "C": "C comme Courcelle",
            "D": "D comme Dauphin",
            "E": "E comme Escargot",
            "F": "F comme France",
            "G": "G comme Girafe",
            "H": "H comme Humain",
            "I": "I comme Image",
            "J": "J comme Julie",
            "K": "K comme Karine",
            "L": "L comme Lorna",
            "M": "M comme Maman",
            "N": "N comme Nager",
            "O": "O comme Orange",
            "P": "P comme Papa",
            "Q": "Q comme Queue",
            "R": "R comme Rouge",
            "S": "S comme Serpent",
            "T": "T comme Thomas",
            "U": "U comme Univers",
            "V": "V comme Vincent",
            "W": "W comme Wagon",
            "X": "X comme Xylophone",
            "Y": "Igrec comme Yahourt",
            "Z": "Z comme Zèbre",
        };

        $(window).on("keypress", function (e) {
            //console.log(e);

            var keyValue = e.key;
            keyValue = mappings[keyValue] || keyValue;
            keyValue = keyValue.toUpperCase();

            var text = sounds[keyValue] || keyValue;
            say(text);

            show(keyValue);
        });


    </script>
</body>
</html>